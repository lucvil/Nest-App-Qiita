<!DOCTYPE html>
<html>
<head>
	<title>NestJS</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container mt-2">
	<h1 class="display-6 text-primary">
	<strong>NestJS</strong>
	</h1>
	<div id="result" class="my-3">
	<p id="msg">※IDを送信して下さい。</p>
	</div>
	<div class="mb-3">
	<label for="id" class="form-label">ID</label>
	<input type="number" class="form-control" 
		id="id" name="id" value="0">
	</div>
	<button class="btn btn-secondary" onclick="doAction();">送信</button>
	<div class="my-3">&nbsp;</div>
	<div style="width:100%" 
	class="fixed-bottom bg-secondary p-1">
	<p class="text-center text-white m-0">
		copyright 2022 SYODA-Tuyano.</p>
	</div>
	<script>
	function doAction() {
		const n = document.querySelector('#id').value
		fetch('/hello/' + n)
		.then(response => response.json())
		.then(data => setData(data))
	}


	function setData(obj) {
		const table = `<table class="table">
		<thead>
			<tr><th>ID</th><th>Name</th><th>Mail</th><th>Age</th><th>Created</th></tr>
		</thead>
		<tbody>
			<tr>
			<td>${obj.id}</td>
			<td>${obj.data.name}</td>
			<td>${obj.data.mail}</td>
			<td>${obj.data.age}</td>
			<td>${obj.created}</td>
			</tr>
		</tbody>
		</table>`
		document.querySelector('#result').innerHTML = table
	}
	</script>
</body>
</html>